<!DOCTYPE html>
<html>
<head>
    <title>Extension Troubleshooter</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 4px; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .warning { background: #fff3cd; border-color: #ffeaa7; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .info { background: #d1ecf1; border-color: #bee5eb; }
        button { background: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        .disable-btn { background: #dc3545; }
        .disable-btn:hover { background: #c82333; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 12px; }
        .extension-info { display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; background: #f8f9fa; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Extension Troubleshooter</h1>
        
        <div class="section error">
            <h3>‚ö†Ô∏è Problem Identified</h3>
            <p><strong>Extension ID:</strong> <code>iadokddofjgcgjpjlfhngclhpmaelnli</code></p>
            <p>This extension is trying to load resources on your page, causing console errors.</p>
        </div>
        
        <div class="section info">
            <h3>üîç How to Fix</h3>
            <ol>
                <li><strong>Open Chrome Extensions:</strong> Go to <code>chrome://extensions/</code></li>
                <li><strong>Find the Extension:</strong> Look for an extension with ID ending in <code>...elnli</code></li>
                <li><strong>Disable or Remove:</strong> Toggle off or remove the problematic extension</li>
                <li><strong>Refresh Page:</strong> Reload your app to see if errors are gone</li>
            </ol>
        </div>
        
        <div class="section">
            <h3>üß™ Test Your App</h3>
            <button onclick="testApp()">Test Main App</button>
            <button onclick="testLogin()">Test Login Flow</button>
            <button onclick="clearData()" class="disable-btn">Clear All Data</button>
        </div>
        
        <div class="section">
            <h3>üìä Console Status</h3>
            <div id="consoleStatus">Checking for errors...</div>
        </div>
        
        <div class="section">
            <h3>üîó Quick Links</h3>
            <button onclick="window.open('chrome://extensions/', '_blank')">Open Extensions Page</button>
            <button onclick="window.open('http://localhost:5000/', '_blank')">Open Main App</button>
            <button onclick="window.open('http://localhost:5000/test-fixes.html', '_blank')">Open Test Page</button>
        </div>
        
        <div class="section warning">
            <h3>üí° Pro Tips</h3>
            <ul>
                <li>Extensions often inject scripts into web pages</li>
                <li>Some extensions can cause conflicts with web apps</li>
                <li>Try disabling extensions one by one to identify the culprit</li>
                <li>Use Chrome's incognito mode to test without extensions</li>
            </ul>
        </div>
    </div>
    
    <script>
        let errorCount = 0;
        let lastError = null;
        
        function updateConsoleStatus() {
            const status = document.getElementById('consoleStatus');
            
            if (errorCount === 0) {
                status.innerHTML = '<div class="success">‚úÖ No errors detected in console</div>';
            } else {
                status.innerHTML = `
                    <div class="error">
                        ‚ùå ${errorCount} error(s) detected<br>
                        <small>Last error: ${lastError || 'Unknown'}</small>
                    </div>
                `;
            }
        }
        
        function testApp() {
            console.log('üß™ Testing main app...');
            window.open('http://localhost:5000/', '_blank');
        }
        
        function testLogin() {
            console.log('üß™ Testing login flow...');
            window.open('http://localhost:5000/test-fixes.html', '_blank');
        }
        
        function clearData() {
            console.log('üßπ Clearing all data...');
            localStorage.clear();
            sessionStorage.clear();
            
            // Clear cookies
            document.cookie.split(";").forEach(function(c) { 
                document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
            });
            
            alert('All data cleared! Refresh the page to see changes.');
        }
        
        // Monitor console errors
        const originalError = console.error;
        console.error = function(...args) {
            errorCount++;
            lastError = args.join(' ');
            originalError.apply(console, args);
            updateConsoleStatus();
        };
        
        // Monitor unhandled errors
        window.addEventListener('error', function(event) {
            errorCount++;
            lastError = event.message;
            updateConsoleStatus();
        });
        
        // Monitor unhandled promise rejections
        window.addEventListener('unhandledrejection', function(event) {
            errorCount++;
            lastError = event.reason;
            updateConsoleStatus();
        });
        
        // Initialize
        updateConsoleStatus();
        
        // Check for the specific extension error
        setTimeout(() => {
            if (errorCount > 0) {
                console.log('üîç Extension errors detected. Check the troubleshooting steps above.');
            }
        }, 2000);
        
        console.log('üîß Extension Troubleshooter loaded');
        console.log('üì± Current URL:', window.location.href);
    </script>
</body>
</html>
