<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tour Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/react-joyride@2.9.3/lib/react-joyride.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #000; color: white; }
        .test-element { padding: 20px; margin: 10px; background: #333; border-radius: 8px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>React Joyride Tour Test</h1>
    <button onclick="startTour()">Start Tour</button>
    
    <div id="step1" data-testid="daily-progress" class="test-element">
        <h3>Daily Progress (Step 1)</h3>
        <p>This should be highlighted in the tour</p>
    </div>
    
    <div id="step2" data-testid="water-consumption-card" class="test-element">
        <h3>Water Card (Step 2)</h3>
        <p>This should be the second step</p>
    </div>
    
    <div id="tour-container"></div>

    <script>
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        
        const tourSteps = [
            {
                target: 'body',
                title: 'Welcome!',
                content: 'This is a test tour',
                placement: 'center',
            },
            {
                target: '[data-testid="daily-progress"]',
                title: 'Daily Progress',
                content: 'This is the daily progress section',
                placement: 'bottom',
            },
            {
                target: '[data-testid="water-consumption-card"]',
                title: 'Water Tracking',
                content: 'This is the water tracking card',
                placement: 'top',
            }
        ];

        function TourTest() {
            const [runTour, setRunTour] = useState(false);
            
            const handleJoyrideCallback = (data) => {
                console.log('Joyride callback:', data);
                const { status } = data;
                if (status === 'finished' || status === 'skipped') {
                    setRunTour(false);
                }
            };
            
            window.startTour = () => {
                console.log('Starting tour...');
                setRunTour(true);
            };
            
            return React.createElement(ReactJoyride.default, {
                callback: handleJoyrideCallback,
                continuous: true,
                run: runTour,
                steps: tourSteps,
                showSkipButton: true,
                styles: {
                    options: {
                        zIndex: 10000,
                        primaryColor: '#000',
                    }
                }
            });
        }
        
        const root = createRoot(document.getElementById('tour-container'));
        root.render(React.createElement(TourTest));
    </script>
</body>
</html>